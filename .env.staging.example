#############################################
# Diyartec Staging Environment Example       #
# NODE_ENV=staging mirrors prod with safer   #
# debug defaults (NEVER reuse secrets).      #
#############################################

NODE_ENV=staging

# --- Core Required ---
CLIENT_ID=your_staging_google_client_id
CLIENT_SECRET=your_staging_google_client_secret
REDIRECT_URI=https://staging-api.diyartec.com/api/auth/google/callback
FRONTEND_BASE_URL=https://staging.diyartec.com
N8N_WEBHOOK_URL=https://staging-n8n.diyartec.com/webhook
REDIS_URL=redis://:password@staging-redis:6379/0
DATABASE_URL=postgres://user:pass@staging-postgres:5432/schedulink

# Staging-only secrets (distinct from production)
# New canonical names (legacy names still accepted for a deprecation window):
SECRETKEY=staging_generate_64_hex_chars
REFRESHTOKENENCRYPTIONKEY=staging_generate_64_hex_chars
# REFRESHTOKENENCRYPTIONKEY_PREVIOUS=prev_rotation_key_if_needed

# --- Security / Policy Toggles ---
ENFORCEHTTPS=true
CSPSTRICT=false                  # Allow easier debugging; enforce true in prod
PRINT_SECRET_FINGERPRINTS=true   # Allowed in staging for diagnostics (false in prod)
HSTSENABLED=false                # Enable after staging domain TLS strategy finalized
CSRFPROTECTION_ENABLED=true
SECURITYHEADERSENABLED=true

# --- Debugging / Performance Relaxations ---
RATELIMIT_ENABLED=false          # Disable rate limiting for QA convenience
AUDIT_LOG_ENABLED=true           # Exercise audit events
SESSION_IDLE_MAX_MINUTES=5       # Short sessions accelerate testing of expiry flows
SESSION_ABSOLUTE_MAX_HOURS=24
SESSION_ROTATE_MINUTES=10
ACCESS_TOKEN_REFRESH_SKEW_SECONDS=90

# --- Optional CORS / Origins (comma separated) ---
CORS_ALLOWED_ORIGINS=
CORS_ALLOW_CREDENTIALS=true

# --- Rate Limit Tunables (ignored if RATE_LIMIT_ENABLED=false) ---
RATE_LIMIT_AUTH_BURST=5
RATE_LIMIT_AUTH_REFILL_PER_MINUTE=5
RATE_LIMIT_API_BURST=60
RATE_LIMIT_API_REFILL_PER_MINUTE=60

# --- Legal Versions (keep aligned with production) ---
PRIVACY_POLICY_VERSION=PP-1.0.0
TERMS_VERSION=TOS-1.0.0

# --- Discouraged Overrides (leave unset) ---
# ALLOW_INMEMORY_SESSION_IN_PROD=true
# ALLOW_HEALTH_PASS_WITHOUT_REDIS=true
